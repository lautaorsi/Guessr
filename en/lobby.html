<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" href="../static/logo.png">
        <link rel="stylesheet" href="../styles/lobby.css">
        <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Gabarito&family=Merriweather Sans&family=Roboto">
        <script src="https://kit.fontawesome.com/493860cbeb.js" crossorigin="anonymous"></script>
        <script src="https://randojs.com/2.0.0.js"></script>
        <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.0.0/css/flag-icons.min.css"/>
    </head>
    <body>
        <title>VideoGuessr - Lobby</title>
        <div class="adbox left">
        <script type="text/javascript">
            atOptions = {
                'key' : 'fffa065c6177bf16965d30a71a57bf29',
                'format' : 'iframe',
                'height' : 600,
                'width' : 160,
                'params' : {}
                
            };
            document.write('<scr' + 'ipt type="text/javascript" src="//www.topcreativeformat.com/fffa065c6177bf16965d30a71a57bf29/invoke.js"></scr' + 'ipt>');
        </script>
        </div>
        <div class="adbox right">
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'fffa065c6177bf16965d30a71a57bf29',
                            'format' : 'iframe',
                            'height' : 600,
                            'width' : 160,
                            'params' : {}
                            
                        };
                        document.write('<scr' + 'ipt type="text/javascript" src="//www.topcreativeformat.com/fffa065c6177bf16965d30a71a57bf29/invoke.js"></scr' + 'ipt>');
                    </script>
        </div>
        
            <img src="../static/logo.png" alt="logo" class="logoimg" draggable="false" onclick="window.location='https://videoguessr.com/'">
            <a onclick="got()">
                <button id="return" >
                    <i class="fa-solid fa-arrow-left" style="color: #000000;"></i>
                </button>
            </a>
            <div id="main_container">
                <h2 id="gamemode"></h2>
                <div id="imgcontainer">
                    <img src="" id="img2">
                    <div id="foot">
                        <p id="desc"></p>
                    </div>
                </div>
                <div id="selectors">
                        <select id="radiusselect" class="selects">
                            <option value="none" disabled selected>Radius</option>
                            <option value=5 >5km</option>
                            <option value=20 >20km</option>
                            <option value=50 >50km</option>
                            <option value=100 >100km</option>
                            <option value=200 >200km</option>
                            <option value=1000 >1000km</option>
                        </select>
                        <select id="colorselect" class="selects">
                            <option value="none" disabled selected>Color</option>
                            <option value='0' class="red">Red</option>
                            <option value="5" class="blue">Blue</option>
                            <option value="2" class="yellow">Yellow</option>
                            <option value="1" class="purple">Purple</option>
                            <option value="3" class="orange">Orange</option>
                            <option value="4" class="black">Black</option>
                        </select>
                        <select id="roundselect" class="selects">
                            <option value="none" disabled selected>Rounds</option>
                            <option value=5 >5 rounds</option>
                            <option value=10 >10 rounds</option>
                            <option value=15 >15 rounds</option>
                            <option value=20 >20 rounds</option>
                        </select>
                        <select id="timeselect" class="selects">
                            <option value="none" disabled selected>Time</option>
                            <option value=30 id="time1">30s</option>
                            <option value=50 id="time2">50s</option>
                            <option value=90 id="time3">90s</option>
                            <option value=120 id="time4" >120s</option>
                            <option value=210 id="time5">210s</option>
                        </select>

                </div>
                <button id="start" onclick="myFunction()">
                   Play
                </button>

                <input type="checkbox" class="checkmute" id="checkmute"> <label for="checkmute" id="mutetext">Mute video</label>
            </div>
            <div id="controlcont">
                <p id="key" class="s">M</p><p class="s" >Abrir mapa</p>
                <p id="key" class="s">⬅</p><p id="key" class="s">➡</p><p class="s" id="keyxplain">Subir/Bajar velocidad de reproduccion</p>
            </div>
            <div id="warning">
                <h2 id="attention">•Attention•</h2>
                <h3 id="color_warning">-Choose a pin color!</h3>
                <h3 id="time_warning">-Choose a timer!</h3>
                <h3 id="rounds_warning">-Choose round amount!</h3>
                <h3 id="radius_warning">-Choose radius!</h3>
            </div>

            
            <div class="fst-cont">
                <div class="fstset flag-cont">
                    <span class="fi fi-et flag-icon"></span>
                    <span class="fi fi-kh flag-icon"></span>
                    <span class="fi fi-cn flag-icon"></span>
                    <span class="fi fi-bo flag-icon"></span>
                    <span class="fi fi-pr flag-icon"></span>
                    <span class="fi fi-ru flag-icon"></span>
                    <span class="fi fi-ar flag-icon"></span>
                    <span class="fi fi-ng flag-icon"></span>
                    <span class="fi fi-ca flag-icon"></span>
                    <span class="fi fi-au flag-icon"></span>
                    <span class="fi fi-jp flag-icon"></span>
                    <span class="fi fi-cl flag-icon"></span>
                    <span class="fi fi-uy flag-icon"></span>
                    <span class="fi fi-br flag-icon"></span>
                    <span class="fi fi-sk flag-icon"></span>
                    <span class="fi fi-ch flag-icon"></span>
                    <span class="fi fi-us flag-icon"></span>
                    <span class="fi fi-gb flag-icon"></span>
                    <span class="fi fi-mx flag-icon"></span>
                    <span class="fi fi-es flag-icon"></span>
                    <span class="fi fi-no flag-icon"></span>
                    <span class="fi fi-ps flag-icon"></span>
                    <span class="fi fi-pa flag-icon"></span>
                    <span class="fi fi-py flag-icon"></span>
                    <span class="fi fi-se flag-icon"></span>
                    <span class="fi fi-tw flag-icon"></span>
                    <span class="fi fi-sd flag-icon"></span>
                    <span class="fi fi-tg flag-icon"></span>
                    <span class="fi fi-th flag-icon"></span>
                    <span class="fi fi-am flag-icon"></span>
                    <span class="fi fi-ad flag-icon"></span>
                    <span class="fi fi-cc flag-icon"></span>
                    <span class="fi fi-bw flag-icon"></span>
                    <span class="fi fi-be flag-icon"></span>
                    <span class="fi fi-bm flag-icon"></span>
                    <span class="fi fi-cm flag-icon"></span>
                    <span class="fi fi-aq flag-icon"></span>
                    <span class="fi fi-at flag-icon"></span>
                    <span class="fi fi-ye flag-icon"></span>
                    <span class="fi fi-cu flag-icon"></span>
                    <span class="fi fi-dk flag-icon"></span>
                    <span class="fi fi-eg flag-icon"></span>
                    <span class="fi fi-sv flag-icon"></span>
                    <span class="fi fi-ee flag-icon"></span>
                    <span class="fi fi-de flag-icon"></span>
                    <span class="fi fi-gt flag-icon"></span>
                    <span class="fi fi-ht flag-icon"></span>
                    <span class="fi fi-it flag-icon"></span>
                    <span class="fi fi-kw flag-icon"></span>
                    <span class="fi fi-lb flag-icon"></span>
                    <span class="fi fi-mc flag-icon"></span>
                    <span class="fi fi-mn flag-icon"></span>
                    <span class="fi fi-nz flag-icon"></span>
                    <span class="fi fi-pe flag-icon"></span>
                    <span class="fi fi-ne flag-icon"></span>
                    <span class="fi fi-nl flag-icon"></span>
                    <span class="fi fi-qa flag-icon"></span>
                    <span class="fi fi-sa flag-icon"></span>
                    <span class="fi fi-ws flag-icon"></span>
                    <span class="fi fi-so flag-icon"></span>
                    <span class="fi fi-tj flag-icon"></span>
                    <span class="fi fi-tn flag-icon"></span>
                    <span class="fi fi-tr flag-icon"></span>
                </div>
        
            </div>



    </body>
</html>

<script>
    const descriptions = {
        'ITA': 'Classic rules, locations within Italy.',
        'PAUSE': 'Classic rules, play and pause buttons available. <br> Be careful, the clock won`t stop!',
        'CLASICO': 'Classical gamemode. <br> No rules, enjoy!',
        'clear_map': 'Satellite map! <br> No names or divisions! <br> (Strongly suggested for advanced players)',
        '1hp': 'Challenge: <br> conseguir la mayor cantidad de aciertos sin equivocarse, <br> un error y game over!',
        'contrarreloj': 'Challenge: <br> Get the most amount of guesses <br> before the time runs out!',
        'radius': 'Get the most amount of rounds <br> within the radius!',
        'INVERTIDO': 'Careful! Video will be upside down, you`ll have to sharpen your senses to win!',
        'nozoom': 'Classic rules, but watch out as you won`t be able to zoom, you better have a sharp hand!',
        'US': 'Travel the US, their beautiful landscapes and valleys will leave you astonished!',
        'EUROPA': 'Travel Europe.This mode will take you through their cities , iconic beaches and mountains!',
        'STATIC': 'Cansado de videos? Prueba adivinar las ubicaciones en las que fueron tomadas estas fotografias!',
        'ARG': 'Travel Argentina.  <br> Home of tango and football legends!'
    }

    const titles = {
        'ITA': 'ITALY 🇮🇹',
        'PAUSE': 'PAUSE⏯️',
        'CLASICO' : 'CLASSIC',
        'contrarreloj' : 'Time Trial ⏱️',
        '1hp' : '1 VIDA 🧡',
        'radius': 'RADIUS📏',
        'clear_map' : 'SATELLITE🛰️',
        'INVERTIDO': 'UPSIDE DOWN',
        'nozoom': 'NO ZOOM',
        'US': 'US 🇺🇸',
        'EUROPA': 'EUROPE 🇪🇺',
        'STATIC': 'ESTATICO',
        'ARG': 'ARGENTINA'
    }

    const images = {
        'ITA': '../static/italy.jpg',
        'PAUSE': '../static/CLASICO.jpg',
        'CLASICO' : '../static/CLASICO.jpg',
        'contrarreloj' : '../static/CLASICO.jpg',
        'radius' : '../static/CLASICO.jpg',
        '1hp' : '../static/CLASICO.jpg',
        'clear_map' : '../static/earthmap.jpg',
        'INVERTIDO': '../static/CLASICO.jpg',
        'nozoom': '../static/CLASICO.jpg',
        'US': '../static/USA.png',
        'EUROPA': '../static/EUROPA.jpg',
        'STATIC': '../static/CLASICO.jpg',
        'ARG': '../static/Arg.jpg'
    }

    var descript = document.getElementById('desc')
    var wimg = document.getElementById("img2")
    var title = document.getElementById("gamemode")
    const gamemodestr = localStorage.getItem('gamemode');
    
    

    
    const gamename = JSON.parse(gamemodestr)
    descript.innerHTML = descriptions[gamename.hello]
    wimg.src = images[gamename.hello]
    title.innerHTML=titles[gamename.hello]
    var warning_elem = document.getElementById('warning')
    const btn = document.getElementById("start");
    console.log(gamename)
    if (gamename.hello == 'contrarreloj' || gamename.hello == '1hp'){
        document.getElementById('roundselect').setAttribute("hidden", "hidden")
        document.getElementById('timeselect').style.marginLeft = "20%"
        document.getElementById('time1').innerHTML = "30s"
        document.getElementById('time1').value = 30
        document.getElementById('time2').innerHTML = "50s"
        document.getElementById('time2').value = 50
        document.getElementById('time3').innerHTML = "80s"
        document.getElementById('time3').value = 80
        document.getElementById('time4').innerHTML = "100s"
        document.getElementById('time4').value = 100
        document.getElementById('time5').innerHTML = "120s"
        document.getElementById('time5').value = 120
    }


    if(gamename.hello == 'INVERTIDO'){
        wimg.style.rotate = '180deg'
    }


    if(gamename.hello == 'nozoom' || gamename.hello == 'clear_map'){
        document.getElementById('imgcontainer').style.width = '90%'
    }

    if(gamename.hello != 'radius'){
        document.getElementById('radiusselect').style.display = 'none'

    }
    function myFunction(){
        var time = document.getElementById('timeselect').value
        if(gamename.hello == 'contrarreloj'){
            var rounds = 9999
        }
        else{
            var rounds = document.getElementById('roundselect').value
        }
        var color = document.getElementById('colorselect').value
        var attention = document.getElementById('attention')


        if(gamename.hello == 'radius' &&  document.getElementById('radiusselect').value == 'none'){
            document.getElementById('radius_warning').style.display = 'block'

        }
        else{
            localStorage.setItem('radius', document.getElementById('radiusselect').value)
        }
        if (time == 'none'){
            console.log('time not selected')
            var time_warning = document.getElementById('time_warning')
            warning_elem.style.display = 'block'
            time_warning.style.display = 'block'
        }
        if (color == 'none'){
            console.log('color not selected')
            var color_warning = document.getElementById('color_warning')
            warning_elem.style.display = 'block'
            color_warning.style.display = 'block'

            
        }
        if (rounds == 'none'){
            console.log('rounds not selected')
            var rounds_warning = document.getElementById('rounds_warning')
            warning_elem.style.display = 'block'
            rounds_warning.style.display = 'block'

        }
        if(time != 'none' && color != 'none' && rounds != 'none'){
            var checkbox = document.getElementById('checkmute').checked
            localStorage.setItem('mute', checkbox)
            localStorage.setItem('rounds', rounds)
            localStorage.setItem('color', color)
            localStorage.setItem('time', time)
            if(gamename.hello == 'STATIC'){
                window.location.href = 'staticgame.html'
            }
            else{
            window.location.href = 'game.html' 
            }
            
        }
        else{
            warning_elem.style.animation = 'horizontal-shaking 1.5s 0s'
            setTimeout(function(){
                showWarning()
                }, 4000);
        }
    }
    function showWarning(){
        console.log('warning hidden')
        warning_elem.style.display = 'none'
        color_warning.style.display = 'none'
        time_warning.style.display = 'none'
        rounds_warning.style.display = 'none'
        radius_warning.style.display = 'none'
        warning_elem.style.animation = ''

    }

    function got(){
        if(gamename.hello == 'ITA' || gamename.hello == 'US' || gamename.hello == 'EUROPA'){
            window.location.href = 'regions.html'
        }
        else{
            window.location.href = 'index.html'
        }
    }

</script>

<script>
    var flags = document.getElementsByClassName('fi')
    ran()
    function ran(){
        for(var i = 0; i < flags.length; i++){
            const randomHeight = rando(2, 95); // Random value between 25 and 50

            flags[i].style.top = `${randomHeight}%`;
        };
    }
</script>
